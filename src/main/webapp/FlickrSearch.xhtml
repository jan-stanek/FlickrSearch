<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:b="http://bootsfaces.net/ui"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Flickr Search</title>
    <meta name="author" content="Jan Staněk"/>
</h:head>

<h:body style="padding: 60px;">
    <b:navBar brand="Flickr Search" brandHref="#" fixed="top" inverse="true">
    </b:navBar>

    <b:container>

        <p:ajaxStatus onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />

        <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
            <h:graphicImage library="img" name="loading.gif" />
        </p:dialog>

        <h:form id="searchForm">
            <b:well>
                <b:row>
                    <div class="col-md-2"></div>
                    <b:inputText span="5" placeholder="Zadejte klíčová slova"
                                 value="#{searchBean.searchModel.tags}"/>
                    <b:colorPicker span="2" placeholder="Barva" control="wheel"
                                   value="#{searchBean.searchModel.color}"/>
                    <b:commandButton span="1" look="primary" value="Hledat" action="#{searchBean.searchPhotos}"
                                     update="results"/>
                    <div class="col-md-2"></div>
                </b:row>
            </b:well>
        </h:form>

        <b:row id="results">
            <ui:repeat value="#{searchBean.searchResult}" var="photo">
                <b:column col-xs="6" col-md="3">
                    <b:thumbnail>
                        <p:lightBox>
                            <h:outputLink value="#{photo.imageUrl}" title="#{photo.title}">
                                <h:graphicImage value="#{photo.squareUrl}" width="100%"/>
                            </h:outputLink>
                            <h:outputText value="#{photo.rank}" >
                                <f:convertNumber pattern="#0.00" />
                            </h:outputText>
                        </p:lightBox>
                    </b:thumbnail>
                </b:column>
            </ui:repeat>
        </b:row>
    </b:container>

</h:body>
</html>